"use strict";(self.webpackChunktodo_future=self.webpackChunktodo_future||[]).push([[591],{5591:function(e,t,n){n.r(t),n.d(t,{default:function(){return ne}});var r=n(9439),i=n(1889),a=n(5527),s=n(9164),o=n(4554),l=n(2791),d=n(7044),c=n(8819),u=n(6801),x=n(890),h=n(493),p=n(3239),m=n(2199),f=n(1413),Z=n(8096),j=n(9012),g=n(9321),k=n(9891),b=n(254),y=n(5414),C=n(6117),T=n(4165),v=n(5861),S=n(6864),I=n(6727),w=n(6243),P=(0,y.makeStyles)((function(){return{customList:{"& .MuiList-root":{padding:0}},taskCheckBox:{padding:0,zIndex:0},taskTitle:{margin:"0 10px",fontSize:"16px",wordBreak:"break-all",width:"100%",maxWidth:" 250px"}}})),F=I.Ry({title:I.Z_().min(3,"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0430").max(15,"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 15 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),description:I.Z_().max(80,"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 80 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")}),W=n(184),L=(0,y.makeStyles)((function(){return{customInput:{"& .MuiInputBase-root":{padding:0},"& .MuiInputBase-input":{padding:5},"& .MuiFormHelperText-root":{lineHeight:1,margin:0,padding:0,position:"absolute",bottom:-15,left:0,color:"#ff6d6d"},"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"rgba(10,41,91,0.66)"},"&.Mui-focused fieldset":{borderColor:"rgba(10,41,91,0.66)",borderWidth:1}}}}})),D=(0,l.memo)((function(e){var t=e.task,n=e.setOpen,r=L(),i=function(e,t){var n=(0,w.T)(),r=(0,S.TA)({initialValues:{title:e.title,description:null===e.description?"":e.description,status:e.status,priority:e.priority},validationSchema:F,onSubmit:function(){var r=(0,v.Z)((0,T.Z)().mark((function r(i){var a;return(0,T.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n(z.updateTaskTC({taskId:e.id,todoId:e.todoListId,model:i}));case 2:a=r.sent,z.updateTaskTC.rejected.match(a)?setTimeout((function(){n(z.changeTaskStatusAC({taskId:e.id,todoId:e.todoListId,taskStatus:"idle"}))}),2e3):t(!1);case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()});return{formik:r}}(t,n),a=i.formik;return(0,W.jsxs)("form",{onSubmit:a.handleSubmit,children:[(0,W.jsx)(Z.Z,{children:(0,W.jsxs)(j.Z,{children:[(0,W.jsx)(o.Z,{sx:{margin:"10px 0 20px"},children:(0,W.jsxs)(Z.Z,{fullWidth:!0,children:[(0,W.jsx)(o.Z,{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),(0,W.jsx)(b.Z,(0,f.Z)({margin:"normal",style:{margin:0},className:r.customInput,helperText:a.touched.title&&a.errors.title},a.getFieldProps("title")))]})}),(0,W.jsx)(o.Z,{sx:{margin:"0 0 20px"},children:(0,W.jsxs)(Z.Z,{fullWidth:!0,children:[(0,W.jsx)(o.Z,{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),(0,W.jsx)(b.Z,(0,f.Z)({margin:"normal",style:{margin:0},className:r.customInput,helperText:a.touched.description&&a.errors.description,multiline:!0,maxRows:3},a.getFieldProps("description")))]})}),(0,W.jsx)(o.Z,{sx:{margin:"0 0 10px"},children:(0,W.jsxs)(Z.Z,{fullWidth:!0,children:[(0,W.jsx)(o.Z,{children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),(0,W.jsx)(g.Z,(0,f.Z)((0,f.Z)({className:r.customInput},a.getFieldProps("status")),{},{children:C.HR.map((function(e){var t=e.status,n=e.label;return(0,W.jsx)(k.Z,{value:t,sx:{"&:hover":{backgroundColor:"#b9b7b7",transition:"background-color 0.3s ease"}},children:n},n)}))}))]})}),(0,W.jsx)(o.Z,{sx:{margin:"0 0 10px"},children:(0,W.jsxs)(Z.Z,{fullWidth:!0,children:[(0,W.jsx)(o.Z,{children:"\u041f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442"}),(0,W.jsx)(g.Z,(0,f.Z)((0,f.Z)({sx:{maxWidth:"100%"},className:r.customInput},a.getFieldProps("priority")),{},{children:C.tt.map((function(e){var t=e.priority,n=e.label;return(0,W.jsx)(k.Z,{value:t,sx:{"&:hover":{backgroundColor:"#b9b7b7",transition:"background-color 0.3s ease"}},children:n},n)}))}))]})}),(0,W.jsx)(u.Z,{type:"submit",variant:"contained",color:"primary",disabled:"loading"===t.taskStatus,children:"Update"})]})}),"failed"===t.taskStatus&&(0,W.jsx)(o.Z,{sx:{textAlign:"center",mt:"5px",color:"#d50000"},children:"try later..."})]})})),Y=n(4852),M=n(4454),A=n(7992),B=n(3937),N=n(7122),E=n(4543),O=(0,l.memo)((function(e){var t=e.task,n=e.todoId,i=(0,l.useState)(!1),a=(0,r.Z)(i,2),s=a[0],c=a[1],h=t.status,p=t.priority,m=t.title,f=P(),Z=function(e,t){var n=e===B.hY.Completed?"#86ff7b":e===B.hY.InProgress?"#fff487":e===B.hY.Draft?"#e1e1e1":"#63cfff";return{listItemBorderColor:n,listItemStyle:{position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between",background:n,padding:"8px",margin:"5px 0"},menuItemStyle:{fontSize:"14px","&:hover":{backgroundColor:"#e0e0e0",transition:"background-color 0.3s ease"}},taskPriorityTriangleColor:t===B.T8.High?"#ffd630":t===B.T8.Middle?"#ffa805":t===B.T8.Urgently?"#fd2a2a":t===B.T8.Later?"#b0b0b0":"#303aff"}}(h,p),j=Z.menuItemStyle,g=Z.listItemStyle,b=Z.taskPriorityTriangleColor,y=function(e,t,n){var i=(0,d.o)(z),a=i.updateTaskTC,s=i.deleteTaskTC,o=l.useState(null),c=(0,r.Z)(o,2),u=c[0],x=c[1],h=new Date(t.deadline),p=h.getDate().toString().padStart(2,"0"),m=(h.getMonth()+1).toString().padStart(2,"0"),f=h.getFullYear(),Z="".concat(p,".").concat(m,".").concat(f),j=Boolean(u),g=(0,l.useCallback)((function(e){x(e.currentTarget)}),[]),k=(0,l.useCallback)((function(){s({todoId:e,taskId:t.id}),x(null)}),[e,t.id]);return{handleClose:function(){x(null)},open:j,handleClick:g,handleOpenEditModalTask:(0,l.useCallback)((function(){n&&n(!0),x(null)}),[]),anchorEl:u,handleChangeTaskStatus:(0,l.useCallback)((function(n){var r=n.currentTarget.checked?B.hY.Completed:B.hY.New;a({todoId:e,taskId:t.id,model:{status:r}})}),[e,t.id]),handleDeleteTask:k,taskDeadline:Z}}(n,t,c),C=y.open,T=y.handleOpenEditModalTask,v=y.handleClose,S=y.handleClick,I=y.anchorEl,w=y.handleChangeTaskStatus,F=y.handleDeleteTask,L=y.taskDeadline,O={position:"absolute",top:-2,right:-10,width:0,height:0,borderStyle:"solid",borderWidth:"0 15px 15px 15px",borderColor:"transparent transparent ".concat(b," transparent"),transform:"rotate(45deg)"};return(0,W.jsxs)(Y.ZP,{sx:g,children:[(0,W.jsx)(o.Z,{sx:O}),(0,W.jsx)(M.Z,{checked:h===B.hY.Completed,onChange:w,color:"default",size:"small",className:f.taskCheckBox}),(0,W.jsx)(x.Z,{variant:"h3",className:f.taskTitle,children:m}),(0,W.jsxs)(o.Z,{children:["deadline ",(0,W.jsx)("b",{children:L})]}),(0,W.jsxs)(o.Z,{children:[(0,W.jsx)(u.Z,{sx:{color:"black",padding:0,minWidth:"40px",position:"relative","&:hover":{transform:"rotate(180deg)",transition:"transform 0.5s ease"}},onClick:S,children:(0,W.jsx)(N.Z,{})}),(0,W.jsxs)(A.Z,{anchorEl:I,open:C,className:f.customList,onClose:v,children:[(0,W.jsx)(k.Z,{onClick:T,sx:j,children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),(0,W.jsx)(k.Z,{onClick:F,sx:j,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]}),s&&(0,W.jsx)(E.V$,{open:s,setOpen:c,children:(0,W.jsx)(D,{task:t,setOpen:c})})]})})),_=n(4343),z=(0,f.Z)((0,f.Z)({},_.KM),_.KF),H=n(2683),R=n(9480),V=n(5130),J=n(7133),$=n(8970),q=n(5523),K=n(1419),U=n(6382),G=n(2445),Q=I.Ry({title:I.Z_().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e").min(3,"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0430").max(20,"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 20 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),description:I.Z_().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u043e").min(3,"\u041c\u0438\u043d\u0438\u043c\u0443\u043c 3 \u0441\u0438\u043c\u0432\u043e\u043b\u0430").max(80,"\u041c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 80 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432")}),X=function(e){var t=e.id,n=(0,w.T)(),r={padding:"10px"},a=(0,S.TA)({initialValues:{title:"",description:"",priority:1,deadline:new Date},validationSchema:Q,onSubmit:function(){var e=(0,v.Z)((0,T.Z)().mark((function e(r,i){var a,s,o;return(0,T.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.resetForm,(s=i.setSubmitting)(!0),e.next=4,n((0,G.N)({id:t,payload:r}));case 4:o=e.sent,(0,U.h_)(o)||a(),s(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()});return(0,W.jsx)("form",{onSubmit:a.handleSubmit,children:(0,W.jsx)(Z.Z,{children:(0,W.jsxs)(j.Z,{children:[(0,W.jsxs)(i.ZP,{container:!0,children:[(0,W.jsxs)(i.ZP,{item:!0,xs:12,md:7,style:r,children:[(0,W.jsx)(J.Z,{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435:"}),(0,W.jsx)(o.Z,{children:(0,W.jsx)(Z.Z,{fullWidth:!0,children:(0,W.jsx)(b.Z,(0,f.Z)({margin:"normal",style:{margin:0},helperText:a.touched.title&&a.errors.title},a.getFieldProps("title")))})}),(0,W.jsx)(J.Z,{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:"}),(0,W.jsx)(o.Z,{children:(0,W.jsx)(Z.Z,{fullWidth:!0,children:(0,W.jsx)(b.Z,(0,f.Z)({margin:"normal",style:{margin:0},multiline:!0,maxRows:3,helperText:a.touched.description&&a.errors.description},a.getFieldProps("description")))})}),(0,W.jsx)(J.Z,{children:"deadline:"}),(0,W.jsx)(o.Z,{children:(0,W.jsx)(Z.Z,{fullWidth:!0,children:(0,W.jsx)(b.Z,(0,f.Z)({id:"date",type:"date",InputLabelProps:{shrink:!0}},a.getFieldProps("deadline")))})})]}),(0,W.jsxs)(i.ZP,{item:!0,xs:12,md:5,style:r,children:[(0,W.jsx)(J.Z,{children:"\u041f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442:"}),(0,W.jsx)($.Z,(0,f.Z)((0,f.Z)({defaultValue:C.tt[0].priority},a.getFieldProps("priority")),{},{children:C.tt.map((function(e){var t=e.priority,n=e.label;return(0,W.jsx)(q.Z,{value:t,control:(0,W.jsx)(K.Z,{}),label:n,name:"priority"},n)}))}))]})]}),(0,W.jsx)(u.Z,{type:"submit",disabled:a.isSubmitting,variant:"contained",color:"primary",children:"create"})]})})})},ee=n(4048),te=(0,l.memo)((function(e){e.demo;var t=e.todoList,n=t.title,i=t.filter,a=t.id,s=t.entityStatus,f=t.addedDate,Z="loading"===s,j=function(e,t,n,i){var a=(0,ee.C)((function(t){return t.tasks[e]})),s=new Date(i),o=s.getDate().toString().padStart(2,"0"),u=(s.getMonth()+1).toString().padStart(2,"0"),x=s.getFullYear(),h="".concat(o,".").concat(u,".").concat(x),p=(0,l.useState)(B.T8.Low),m=(0,r.Z)(p,2),f=m[0],Z=m[1],j=(0,d.o)(z),g=j.fetchTasksTC,k=j.sortTasksAC,b=(0,d.o)(c.LJ),y=b.deleteTodoTC,C=b.changeTodoFilterAC,T=(0,l.useCallback)((function(t){return C({todoId:e,filter:t})}),[]),v=function(e,t){switch(t){case"active":return e.filter((function(e){return e.status!==B.hY.Completed}));case"completed":return e.filter((function(e){return e.status===B.hY.Completed}));default:return e}}(a,t);return(0,l.useEffect)((function(){n||g(e)}),[]),{handleDeleteTodoList:function(){return y(e)},handleChangeFilter:T,handleChangePriority:function(t){Z((function(e){return 1===e?5:1})),k({tasks:a,priority:f,todoId:e})},filteredTasks:v,tasks:a,priority:f,todoTitleStyle:{display:"flex",justifyContent:"center",maxWidth:"200px",fontWeight:400,margin:"0px auto",wordBreak:"break-all"},todoAddedDate:h}}(a,i,!1,f),g=j.handleDeleteTodoList,k=j.handleChangeFilter,b=j.handleChangePriority,y=j.tasks,C=j.filteredTasks,T=j.priority,v=j.todoTitleStyle,S=j.todoAddedDate,I=(0,l.useState)(!1),w=(0,r.Z)(I,2),P=w[0],F=w[1],L=C.map((function(e){return(0,W.jsx)(O,{todoId:a,task:e},e.id)}));return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(o.Z,{sx:{textAlign:"right"},children:[P&&(0,W.jsx)(E.V$,{open:P,setOpen:F,children:(0,W.jsx)(X,{id:a})}),(0,W.jsx)(u.Z,{sx:{padding:0,minWidth:"40px","&:hover":{transform:"rotate(90deg)",transition:"transform 0.5s ease"}},onClick:g,children:(0,W.jsx)(V.Z,{})})]}),(0,W.jsx)(o.Z,{children:(0,W.jsx)(x.Z,{variant:"h2",fontSize:18,sx:v,children:n})}),(0,W.jsx)(o.Z,{sx:{display:"flex",justifyContent:"center"},onClick:function(){return F(!0)},children:(0,W.jsx)(u.Z,{children:"Create new task"})}),(0,W.jsxs)(o.Z,{children:["created: ",S]}),Z?(0,W.jsx)(o.Z,{sx:{margin:"10px 0",display:"flex",justifyContent:"center"},children:(0,W.jsx)(p.Z,{color:"primary"})}):(0,W.jsx)(h.Z,{sx:{gap:2},children:L}),y.length>0&&(0,W.jsxs)(o.Z,{sx:{display:"flex",justifyContent:"space-around",alignItems:"center"},children:[C.length>1&&(0,W.jsx)(u.Z,{onClick:function(){return b(1)},sx:{padding:0,minWidth:"20px"},children:1===T?(0,W.jsx)(H.Z,{}):(0,W.jsx)(R.Z,{})}),(0,W.jsxs)(m.Z,{variant:"contained",disabled:Z,children:[(0,W.jsx)(E.Y7,{callback:function(){return k("all")},name:"All",variant:"all"===i?"contained":"outlined",color:"all"===i?"primary":"secondary"}),(0,W.jsx)(E.Y7,{callback:function(){return k("active")},name:"Active",variant:"active"===i?"contained":"outlined",color:"active"===i?"primary":"secondary"}),(0,W.jsx)(E.Y7,{callback:function(){return k("completed")},name:"Completed",variant:"completed"===i?"contained":"outlined",color:"completed"===i?"primary":"secondary"})]})]})]})})),ne=function(e){var t=e.demo,n=void 0!==t&&t,u=(0,l.useState)(!1),x=(0,r.Z)(u,2),h=x[0],p=x[1],m=(0,ee.C)(c.S$.H),f=(0,d.o)(c.LJ).createTodoTC,Z=(0,w.T)(),j=(0,l.useCallback)((function(e){return f(e)}),[]),g=m.map((function(e){return(0,W.jsx)(i.ZP,{item:!0,sx:{p:1},md:6,lg:4,sm:6,xs:12,children:(0,W.jsx)(a.Z,{elevation:5,sx:{p:1,margin:"0 auto"},children:(0,W.jsx)(te,{todoList:e,demo:n},e.id)})},e.id)}));return(0,l.useEffect)((function(){n||(p(!0),Z(c.LJ.fetchTodoTC()).finally((function(){return p(!1)})))}),[]),(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(s.Z,{maxWidth:"lg",disableGutters:!0,children:[(0,W.jsx)(o.Z,{sx:{display:"flex",justifyContent:"center",margin:"15px 0 30px"},children:(0,W.jsx)(E.BZ,{maxLengthTitle:20,callback:j})}),(0,W.jsx)(i.ZP,{container:!0,sx:{margin:"10px 0"},children:h?(0,W.jsx)(E.ub,{}):g})]})})}}}]);
//# sourceMappingURL=591.849022f6.chunk.js.map